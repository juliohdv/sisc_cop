{% load staticfiles %}

<script src="{% static 'js/jquery-3.2.1.min.js' %}"></script>
<script src="{% static 'js/scripts.js' %}"></script>

<div id="listaTransaccion">
	<h2 style="color:#FFC107; border-left: solid 8px; padding-left: 50px;">Agregar Transacción</h2><br><br>

	<button type="button" class="btn btn-outline-success" data-toggle="modal" data-target="#mdlDetalle" data-whatever="">Agregar Detalle</button><br><br>

	<table class="table" style="text-align: center;">
		<thead class="thead-dark">
			<tr><th colspan="6" style="text-align: right;">Detalles de Transacción</th></tr>
			<tr>
				<th style="display:none;">Id</th>
				<th>Fecha</th>
				<th>Cuenta</th>
				<th>Descripción</th>				
				<th>Debe</th>
				<th>Haber</th>
			</tr>
		</thead>
		<tbody>
			{% if transaccion.detalle.all %}
				{% for detalle in transaccion.detalle.all%}
					<tr>
						<td style="display: none;">{{ detalle.id }}</td>
						<td>{{ detalle.fecha }}</td>
						<td>{{ detalle.cuenta }}</td>
						<td>{{ detalle.descripcion }}</td>
						<td>{{ detalle.debe }}</td>
						<td>{{ detalle.haber }}</td>
					</tr>
				{% endfor %}
			{% else %}
				<tr><td></td></tr>
				<tr><td colspan="7"><h4 style="color:#FF2134">No hay Detalles de Transicción registrados.</h4></td></tr>
				<tr><td></td></tr>
			{% endif %}
		</tbody>
	</table>

<!-- ------------------- Modal de Detalle de Transacción -->

		<div class="modal fade mdlDetalle" id="mdlDetalle" tabindex="-1" role="dialog" aria-labelledby="mdlDetalle" aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Nuevo Detalle de Transacción</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>

					<form id="formDetalle" method="post" action="" name="formDetalle">
						<div class="modal-body">
							<div class="form-group">
								<label for="fechaD" class="col-form-label">Fecha:</label>
								<input type="date" class="form-control" id="fechaD" name="fechaD">
							</div>
							<div class="form-group">
								<label for="cuentaD" class="col-form-label">Cuenta:</label>
								<select class="form-control" id="cuentaD" name="cuentaD">
									{% for cuenta in cuentasList %}
										<option value="{{ cuenta.id }}">{{ cuenta.nombre }}</option>
									{% endfor %}
								</select>
							</div>
							<div class="form-group">
								<label for="descripcionD" class="col-form-label">Descripción:</label>
								<textarea class="form-control" id="descripcionD" name="descripcionD"></textarea>
							</div>
							<div class="form-group">
								<label for="debeD" class="col-form-label">Debe:</label>
								<input type="number" class="form-control" id="debeD" name="debeD">
							</div>
							<div class="form-group">
								<label for="haberD" class="col-form-label">Haber:</label>
								<input type="number" class="form-control" id="haberD" name="haberD">
							</div>
							<div class="form-group" style="display: none;">
								<label for="transaccionD" class="col-form-label">Transacción</label>
								<input type="number" class="form-control" id="transaccionD" name="transaccionD" value="{{transaccion.id}}">
							</div>	
						</div>

						<div class="modal-footer">
							<input type="hidden" name="sbmNam" value="sbmDetalle">
							<button type="button" class="btn btn-secondary" data-dismiss="modal" id="btnCerrarMdlDetalle">Cerrar</button>
							<input type="submit" id="btnDetalle" value="Guardar" class="btn btn-success">
							<div class="alert alert-success" role="alert" id="respuestaDetalle"></div>
						</div>
					</form>
						
				</div>
			</div>
		</div>
<!-- ------------------- Fin de Modal de Detalle de Transacción -->

</div>